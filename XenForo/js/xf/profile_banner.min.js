var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.findInternal=function(a,c,d){a instanceof String&&(a=String(a));for(var f=a.length,b=0;b<f;b++){var e=a[b];if(c.call(d,e,b,a))return{i:b,v:e}}return{i:-1,v:void 0}};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){a!=Array.prototype&&a!=Object.prototype&&(a[c]=d.value)};
$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);$jscomp.polyfill=function(a,c,d,f){if(c){d=$jscomp.global;a=a.split(".");for(f=0;f<a.length-1;f++){var b=a[f];b in d||(d[b]={});d=d[b]}a=a[a.length-1];f=d[a];c=c(f);c!=f&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})}};
$jscomp.polyfill("Array.prototype.find",function(a){return a?a:function(a,d){return $jscomp.findInternal(this,a,d).v}},"es6","es3");$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.arrayIterator(this)}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.arrayIterator=function(a){var c=0;return $jscomp.iteratorPrototype(function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}})};
$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,f={next:function(){if(d<a.length){var b=d++;return{value:c(b,a[b]),done:!1}}f.next=function(){return{done:!0,value:void 0}};return f.next()}};f[Symbol.iterator]=function(){return f};return f};
$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
!function(a,c,d,f){XF.BannerUpload=XF.Element.newHandler({options:{},init:function(){var a=this.$target,e=a.find(".js-uploadBanner"),c=a.find(".js-banner").closest(".profileBannerContainer"),d=a.find(".js-deleteBanner");c.hasClass("profileBannerContainer--withBanner")?d.show():d.hide();e.on("change",XF.proxy(this,"changeFile"));a.on("ajax-submit:response",XF.proxy(this,"ajaxResponse"))},changeFile:function(b){""!=a(b.target).val()&&this.$target.submit()},ajaxResponse:function(b,e){if(!e.errors&&!e.exception){b.preventDefault();
e.message&&XF.flashMessage(e.message,3E3);var c=this.$target;b=c.find(".js-deleteBanner");var d=c.find(".js-uploadBanner");c=c.find(".js-banner").closest(".profileBannerContainer");var f=e.banners,k=e.position,l=Object.keys(f).length,h="memberProfileBanner-u"+e.userId+"-";d.val("");a(".memberProfileBanner").each(function(){var b=a(this),e=b.parent(),c=b.data("hide-empty"),d=b.data("toggle-class"),g;b.is('[class*="'+h+'"]')&&(b.hasClass(h+"m")?g=f.m:b.hasClass(h+"l")?g=f.l:b.hasClass(h+"o")&&(g=f.o));
b.css({"background-image":g?"url("+g+")":"none","background-position-y":null!==k?k+"%":null});c&&(g?b.removeClass("memberProfileBanner--empty"):b.addClass("memberProfileBanner--empty"));b.trigger("profile-banner:refresh");d&&(g?e.addClass(d):e.removeClass(d))});l?(b.show(),c.addClass("profileBannerContainer--withBanner")):(b.hide(),c.removeClass("profileBannerContainer--withBanner"))}}});XF.BannerPositioner=XF.Element.newHandler({options:{},$banner:null,$value:null,y:0,ns:"bannerPositioner",dragging:!1,
scaleFactor:1,init:function(){var a=this.$target;this.$banner=a;a.css({"touch-action":"none",cursor:"move"});this.$value=a.find(".js-bannerPosY");this.initDragging();var e=this;a.on("profile-banner:refresh",function(){var b=a.css("background-position-y");b&&e.$value.val(parseFloat(b));e.stopDragging();a.off("."+e.ns);e.initDragging()})},initDragging:function(){var a=this.ns,e=this.$banner,c=e.css("background-image"),d=new Image,f=this;if(c=c.replace(/^url\(["']?(.*?)["']?\)$/i,"$1"))d.onload=function(){var b=
function(){var b=d.width?e.width()/d.width:1;f.scaleFactor=1/(d.height*b/100);e.on("mousedown."+a+" touchstart."+a,XF.proxy(f,"dragStart"))};if(0<e.width())b();else e.one("mouseover."+a+" touchstart."+a,b)},d.src=XF.canonicalizeUrl(c)},dragStart:function(b){b.preventDefault();b=b.originalEvent;var e=this.ns;if(b.touches)this.y=b.touches[0].clientY;else if(this.y=b.clientY,0<b.button)return;this.dragging=!0;a(c).on("mousemove."+e+" touchmove."+e,XF.proxy(this,"dragMove")).on("mouseup."+e+" touchend."+
e,XF.proxy(this,"dragEnd"))},dragMove:function(a){if(this.dragging){a.preventDefault();var b=a.originalEvent;a=parseFloat(this.$banner.css("background-position-y"));b=b.touches?b.touches[0].clientY:b.clientY;a+=(this.y-b)*this.scaleFactor;a=Math.min(Math.max(0,a),100);this.$banner.css("background-position-y",a+"%");this.$value.val(a);this.y=b}},dragEnd:function(a){this.stopDragging()},stopDragging:function(){this.dragging&&(a(c).off("."+this.ns),this.y=0,this.dragging=!1)}});XF.Element.register("banner-upload",
"XF.BannerUpload");XF.Element.register("banner-positioner","XF.BannerPositioner")}(jQuery,window,document);
